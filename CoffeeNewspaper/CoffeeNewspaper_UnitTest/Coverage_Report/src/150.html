<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>e:\githubproject\coffeenewspaper\coffeenewspaper\coffeenewspaper_unittest\servicetest\taskservicetest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Linq;
using System.Threading.Tasks;
using CN_Core;
using CN_Core.Interfaces.Repository;
using CN_Core.Interfaces.Service;
using CoffeeNewspaper_UnitTest.DomainTest;
using Ninject;
using NSubstitute;
using NUnit.Framework;

namespace CoffeeNewspaper_UnitTest.ServiceTest
{
    [TestFixture]
    public class TaskServiceTest : ServiceSetupTearDown
    {
        [Test]
        public async Task AddATimeSlice_AddaBiggerSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(3));
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    new CNTimeSlice(now.AddHours(2), now.AddHours(3).AddMilliseconds(-1))
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));

            //Act
            await targetService.AddATimeSlice(assesTask.TaskId, addedTimeslice);

            //Assert
            await mockTaskDataStore.Received()
                .ExpandTaskTime(Arg.Is&lt;CNTask&gt;(
                    x =&gt; x.TaskId == assesTask.TaskId), now.AddHours(1), null);
            await mockTimesliceDataStore.Received()
                .AddTimeSlice(Arg.Is&lt;CNTimeSlice&gt;(x =&gt;
                    x.Equals(addedTimeslice) &amp;&amp; x.Task.TaskId == assesTask.TaskId));
        }

        [Test]
        public async Task AddATimeSlice_AddaSmallerSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            var addedTimeslice = new CNTimeSlice(now.AddHours(2), now.AddHours(3).AddMilliseconds(-1));
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    new CNTimeSlice(now.AddHours(3))
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));

            //Act
            await targetService.AddATimeSlice(assesTask.TaskId, addedTimeslice);

            //Assert
            await mockTaskDataStore.Received()
                .ExpandTaskTime(Arg.Is&lt;CNTask&gt;(
                    x =&gt; x.TaskId == assesTask.TaskId), now.AddHours(1), null);
            await mockTimesliceDataStore.Received()
                .AddTimeSlice(Arg.Is&lt;CNTimeSlice&gt;(x =&gt;
                    x.Equals(addedTimeslice) &amp;&amp; x.Task.TaskId == assesTask.TaskId));
        }

        [Test]
        public async Task AddATimeSlice_TaskNotExist_Fail()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();

            //Assess
            mockTaskDataStore.GetTask(1).Returns(Task.FromResult((CNTask) null));

            //Act
            var result = await targetService.AddATimeSlice(1, DomainTestHelper.GetARandomTimeSlice());

            //Assert
            Assert.IsNull(result);
            await mockTimesliceDataStore.DidNotReceive().AddTimeSlice(Arg.Any&lt;CNTimeSlice&gt;());
        }

        [Test]
        public async Task AddATimeSlice_TimeSliceIntercept_Fail()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    new CNTimeSlice(now.AddHours(3))
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));

            //Act
            Assert.ThrowsAsync&lt;TimeSliceInterveneException&gt;(async () =&gt;
                await targetService.AddATimeSlice(assesTask.TaskId, new CNTimeSlice(now.AddHours(4))));

            //Assert
            await mockTimesliceDataStore.DidNotReceive().AddTimeSlice(Arg.Any&lt;CNTimeSlice&gt;());
        }

        [Test]
        public async Task GetTaskTimeSlices_TaskNull_ReturnNewEmptyList()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);

            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.GetTaskTimeSlices(assesTask.TaskId);

            //Assert
            Assert.IsNotNull(result);
            Assert.AreEqual(0,result.Count);
            await mockTimesliceDataStore.DidNotReceiveWithAnyArgs().GetTimeSliceByTaskID(0);
        }
        [Test]
        public async Task GetTaskTimeSlices_Traverse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);

            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));

            //Act
            await targetService.GetTaskTimeSlices(assesTask.TaskId);

            //Assert
            await mockTimesliceDataStore.Received().GetTimeSliceByTaskID(assesTask.TaskId);
        }
        [Test]
        public async Task DeleteAllTimeSlicesOfTask_TaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);

            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult((CNTask)null));
            
            //Act
            await targetService.DeleteAllTimeSlicesOfTask(assesTask.TaskId);

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs()
                .UpdateTask(assesTask);
            await mockTimesliceDataStore.DidNotReceiveWithAnyArgs().DeleteTimeSliceByTask(0);
        }
        [Test]
        public async Task DeleteAllTimeSlicesOfTask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            var assesChildTask = DomainTestHelper.GetARandomTask(2);
            var assesSufTask = DomainTestHelper.GetARandomTask(3);
            assesTask.ChildTasks.Add(assesChildTask);
            assesTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = assesTask,
                PreTaskId = assesTask.TaskId,
                SufTask = assesSufTask,
                SufTaskId = assesSufTask.TaskId
            });
            assesTask.StartTime = now.AddDays(-1);
            assesTask.EndTime = now.AddDays(1);

            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));

            //Act
            await targetService.DeleteAllTimeSlicesOfTask(assesTask.TaskId);

            //Assert
            await mockTaskDataStore.Received()
                .UpdateTask(Arg.Is&lt;CNTask&gt;(x=&gt;x.StartTime == null &amp;&amp; x.EndTime == null));
            await mockTimesliceDataStore.Received().DeleteTimeSliceByTask(assesTask.TaskId);
        }
        [Test]
        public async Task DeleteTimeSlices_ContainOnlyOneSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(2);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(1), now.AddHours(2))
                {
                    Task = assesTask,
                    TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;)
                };
            assesTask.UsedTimeSlices =
                new[]
                {
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.DeleteTimeSlices(addedTimeslice);

            //Assert
            await mockTaskDataStore.Received()
                .UpdateStartTaskTime(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == assesTask.TaskId), null);
            await mockTaskDataStore.Received()
                .UpdateStartTaskTime(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == assesTask.TaskId), null);
            await mockTimesliceDataStore.Received().DeleteTimeSlice(addedTimeslice);
        }

        [Test]
        public async Task DeleteTimeSlices_EndOfTwoSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(2), now.AddHours(3).AddMilliseconds(-1))
                {
                    Task = assesTask,
                    TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;)
                };
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.DeleteTimeSlices(addedTimeslice);

            //Assert
//            await mockTaskDataStore.Received().UpdateStartTaskTime(Arg.Is&lt;CNTask&gt;(x=&gt;x.TaskId == assesTask.TaskId), null);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateStartTaskTime(assesTask, null);
            await mockTaskDataStore.Received()
                .UpdateEndTaskTime(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == assesTask.TaskId), now.AddHours(2));
            await mockTimesliceDataStore.Received().DeleteTimeSlice(addedTimeslice);
        }
        
        [Test]
        public async Task DeleteTimeSlices_SliceDontExist_Fail()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(2), now.AddHours(3).AddMilliseconds(-1))
                {
                    Task = assesTask,
                    TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;)
                };
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult((CNTimeSlice) null));
            //Act
            var result = await targetService.DeleteTimeSlices(addedTimeslice);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateStartTaskTime(assesTask, null);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateEndTaskTime(assesTask, null);
            await mockTimesliceDataStore.DidNotReceiveWithAnyArgs().DeleteTimeSlice(addedTimeslice);
        }

        [Test]
        public async Task DeleteTimeSlices_StartOfTwoSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(1), now.AddHours(2))
                {
                    Task = assesTask,
                    TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;)
                };
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(2), now.AddHours(3).AddMilliseconds(-1)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.DeleteTimeSlices(addedTimeslice);

            //Assert
            //            await mockTaskDataStore.Received().UpdateStartTaskTime(Arg.Is&lt;CNTask&gt;(x=&gt;x.TaskId == assesTask.TaskId), null);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateEndTaskTime(assesTask, null);
            await mockTaskDataStore.Received()
                .UpdateStartTaskTime(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == assesTask.TaskId), now.AddHours(2));
            await mockTimesliceDataStore.Received().DeleteTimeSlice(addedTimeslice);
        }
        
        [Test]
        public async Task EndTimeSlice_EndOfTwoSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            var assesChildTask = DomainTestHelper.GetARandomTask(2);
            var assesSufTask = DomainTestHelper.GetARandomTask(3);
            assesTask.ChildTasks.Add(assesChildTask);
            assesTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = assesTask,
                PreTaskId = assesTask.TaskId,
                SufTask = assesSufTask,
                SufTaskId = assesSufTask.TaskId
            });
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(2)) {Task = assesTask, TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;)};
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.EndTimeSlice(assesTask.TaskId, now.AddHours(4));

            //Assert
            await mockTaskDataStore.Received()
                .UpdateEndTaskTime(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == assesTask.TaskId), now.AddHours(4));
            addedTimeslice.EndDateTime = now.AddHours(4);
            await mockTimesliceDataStore.Received().UpdateTimeSlice(addedTimeslice);
        }

        [Test]
        public async Task EndTimeSlice_LastSliceStartTimeBiggerThanSetEndTime_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            var assesChildTask = DomainTestHelper.GetARandomTask(2);
            var assesSufTask = DomainTestHelper.GetARandomTask(3);
            assesTask.ChildTasks.Add(assesChildTask);
            assesTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = assesTask,
                PreTaskId = assesTask.TaskId,
                SufTask = assesSufTask,
                SufTaskId = assesSufTask.TaskId
            });
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(2)) { Task = assesTask, TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;) };
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.EndTimeSlice(assesTask.TaskId, now.AddHours(1));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs()
                .UpdateEndTaskTime(assesTask, now.AddHours(4));
            addedTimeslice.EndDateTime = now.AddHours(4);
            await mockTimesliceDataStore.DidNotReceiveWithAnyArgs().UpdateTimeSlice(addedTimeslice);
        }

        [Test]
        public async Task EndTimeSlice_LastSliceEndTimeIsAlreadySet_DoNotingAndReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            var assesChildTask = DomainTestHelper.GetARandomTask(2);
            var assesSufTask = DomainTestHelper.GetARandomTask(3);
            assesTask.ChildTasks.Add(assesChildTask);
            assesTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = assesTask,
                PreTaskId = assesTask.TaskId,
                SufTask = assesSufTask,
                SufTaskId = assesSufTask.TaskId
            });
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(2),now.AddHours(5)) { Task = assesTask, TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;) };
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.EndTimeSlice(assesTask.TaskId, now.AddHours(4));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs()
                .UpdateEndTaskTime(assesTask, now.AddHours(4));
            addedTimeslice.EndDateTime = now.AddHours(4);
            await mockTimesliceDataStore.DidNotReceiveWithAnyArgs().UpdateTimeSlice(addedTimeslice);
        }
        [Test]
        public async Task DeleteTask_EndOfTwoSlice_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var mockTimesliceDataStore = _kernel.Get&lt;ITimeSliceDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var now = DateTime.Now;

            //Assess
            var assesTask = DomainTestHelper.GetARandomTask(1);
            assesTask.StartTime = now.AddHours(1);

            assesTask.EndTime = now.AddHours(3).AddMilliseconds(-1);
            var addedTimeslice =
                new CNTimeSlice(now.AddHours(2)) { Task = assesTask, TimeSliceId = Guid.NewGuid().ToString(&quot;D&quot;) };
            assesTask.UsedTimeSlices =
                new[]
                {
                    new CNTimeSlice(now.AddHours(1), now.AddHours(2)),
                    addedTimeslice
                }.ToList();
            mockTaskDataStore.GetTask(assesTask.TaskId).Returns(Task.FromResult(assesTask));
            mockTimesliceDataStore.GetTimeSliceById(addedTimeslice.TimeSliceId)
                .Returns(Task.FromResult(addedTimeslice));
            //Act
            await targetService.EndTimeSlice(assesTask.TaskId, now.AddHours(4));

            //Assert
            await mockTaskDataStore.Received()
                .UpdateEndTaskTime(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == assesTask.TaskId), now.AddHours(4));
            addedTimeslice.EndDateTime = now.AddHours(4);
            await mockTimesliceDataStore.Received().UpdateTimeSlice(addedTimeslice);
        }

        [Test]
        public async Task EditATask_TaskNull_Fail()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();

            //Assess
//            mockTaskDataStore.GetTask(1).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.EditATask(null);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(null);
        }
        [Test]
        public async Task EditATask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);

            //Assess
            mockTaskDataStore.UpdateTask(mockTask).Returns(Task.FromResult(true));

            //Act
            var result = await targetService.EditATask(mockTask);

            //Assert
            Assert.IsTrue(result);
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x=&gt;x.Content.Equals(mockTask.Content)));
        }
        [Test]
        public async Task GetAllTasks_Traverse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();

            //Assess
            //Act
            await targetService.GetAllTasks();

            //Assert
            await mockTaskDataStore.Received().GetAllTask();
        }
        [Test]
        public async Task GetTaskById_Traverse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();

            //Assess
            //Act
            await targetService.GetTaskById(1);

            //Assert
            await mockTaskDataStore.Received().GetTask(1);
        }
        [Test]
        public async Task CreateATask_Traverse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask();
            //Assess
            //Act
            await targetService.CreateATask(mockTask);

            //Assert
            await mockTaskDataStore.Received().AddTask(Arg.Is&lt;CNTask&gt;(x=&gt;x.Content.Equals(mockTask.Content)));
        }


        [Test]
        public async Task DeleteTask_TaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.DeleteTask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task DeleteTask_TaskIsDeleted_ReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.DeleteTask(mockTask.TaskId);

            //Assert
            Assert.IsTrue(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task DeleteTask_TaskHasChildTasks_ThrowException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockChildTask = DomainTestHelper.GetARandomTask(2);
            mockTask.ChildTasks.Add(mockChildTask);
            mockTask.IsDeleted = false;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskHasChildTasksException&gt;(async ()=&gt; await targetService.DeleteTask(mockTask.TaskId)); 

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task DeleteTask_TaskHasSufTasks_ThrowException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockSufTask = DomainTestHelper.GetARandomTask(3);
            mockTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockTask,
                SufTask = mockSufTask
            });
            mockTask.IsDeleted = false;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskHasSufTasksException&gt;(async () =&gt; await targetService.DeleteTask(mockTask.TaskId));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }

        [Test]
        public async Task DeleteTask_TaskHasSufTasksHasChildTasksForceDelete_ReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockChildTask = DomainTestHelper.GetARandomTask(2);
            mockTask.ChildTasks.Add(mockChildTask);
            var mockSufTask = DomainTestHelper.GetARandomTask(3);
            mockTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockTask,
                SufTask = mockSufTask
            });
            mockTask.IsDeleted = false;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.DeleteTask(mockTask.TaskId,true);
            
            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; (x.TaskId == mockTask.TaskId) &amp;&amp; x.IsDeleted));
        }



        [Test]
        public async Task RecoverATask_TaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.RecoverATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task RecoverATask_TaskIsRecoverAd_ReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = false;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.RecoverATask(mockTask.TaskId);

            //Assert
            Assert.IsTrue(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task RecoverATask_TaskHasSufTasksHasChildTasksForceRecoverA_ReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockChildTask = DomainTestHelper.GetARandomTask(2);
            mockTask.ChildTasks.Add(mockChildTask);
            var mockSufTask = DomainTestHelper.GetARandomTask(3);
            mockTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockTask,
                SufTask = mockSufTask
            });
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.RecoverATask(mockTask.TaskId);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; (x.TaskId == mockTask.TaskId) &amp;&amp; !x.IsDeleted));
        }



        [Test]
        public async Task RemoveTask_TaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.RemoveATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task RemoveTask_TaskIsRemoved_ReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = false;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.RemoveATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task RemoveTask_TaskHasChildTasks_ThrowException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockChildTask = DomainTestHelper.GetARandomTask(2);
            mockTask.ChildTasks.Add(mockChildTask);
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskHasChildTasksException&gt;(async () =&gt; await targetService.RemoveATask(mockTask.TaskId));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }
        [Test]
        public async Task RemoveTask_TaskHasSufTasks_ThrowException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockSufTask = DomainTestHelper.GetARandomTask(3);
            mockTask.IsDeleted = true;
            mockTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockTask,
                SufTask = mockSufTask
            });
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskHasSufTasksException&gt;(async () =&gt; await targetService.RemoveATask(mockTask.TaskId));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().RemoveTask(mockTask);
        }

        [Test]
        public async Task RemoveTask_TaskHasSufTasksHasChildTasksForceRemove_ReturnTrue()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockChildTask = DomainTestHelper.GetARandomTask(2);
            mockTask.ChildTasks.Add(mockChildTask);
            mockTask.IsDeleted = true;
            var mockSufTask = DomainTestHelper.GetARandomTask(3);
            mockTask.SufTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockTask,
                SufTask = mockSufTask
            });
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.RemoveATask(mockTask.TaskId, true);

            //Assert
            await mockTaskDataStore.Received().RemoveTask(Arg.Is&lt;CNTask&gt;(x =&gt; x.TaskId == mockTask.TaskId));
        }

        [Test]
        public async Task StartATask_TaskNotExist_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.StartATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }

        [Test]
        public async Task StartATask_TaskIsDeleted_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.StartATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task StartATask_TaskStatusNotValid_ThrowsException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DONE;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskStatusException&gt;(async () =&gt; await targetService.StartATask(mockTask.TaskId));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task StartATask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.TODO;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.StartATask(mockTask.TaskId);

            //Assert
            Assert.IsTrue(result);
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; x.Status == CNTaskStatus.DOING &amp;&amp; x.TaskId == mockTask.TaskId));
        }



        [Test]
        public async Task PauseATask_TaskNotExist_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.PauseATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }

        [Test]
        public async Task PauseATask_TaskIsDeleted_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.PauseATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task PauseATask_TaskStatusNotValid_ThrowsException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.PENDING;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskStatusException&gt;(async () =&gt; await targetService.PauseATask(mockTask.TaskId));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task PauseATask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DOING;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.PauseATask(mockTask.TaskId);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; x.Status == CNTaskStatus.TODO &amp;&amp; x.TaskId == mockTask.TaskId));
        }


        [Test]
        public async Task PendingATask_TaskNotExist_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.PendingATask(mockTask.TaskId,null);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }

        [Test]
        public async Task PendingATask_TaskIsDeleted_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.PendingATask(mockTask.TaskId, null);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task PendingATask_TaskStatusNotValid_ThrowsException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DONE;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskStatusException&gt;(async () =&gt; await targetService.PendingATask(mockTask.TaskId, null));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task PendingATask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DOING;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.PendingATask(mockTask.TaskId, &quot;pending reason&quot;);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; 
                x.Status == CNTaskStatus.PENDING 
                &amp;&amp; &quot;pending reason&quot;.Equals(x.PendingReason)
                &amp;&amp; x.TaskId == mockTask.TaskId));
        }


        [Test]
        public async Task FinishATask_TaskNotExist_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.FinishATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }

        [Test]
        public async Task FinishATask_TaskIsDeleted_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsDeleted = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.FinishATask(mockTask.TaskId);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task FinishATask_TaskStatusNotValid_ThrowsException()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DONE;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            Assert.ThrowsAsync&lt;TaskStatusException&gt;(async () =&gt; await targetService.FinishATask(mockTask.TaskId));

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task FinishATask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DOING;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.FinishATask(mockTask.TaskId);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; x.Status == CNTaskStatus.DONE &amp;&amp; x.TaskId == mockTask.TaskId));
        }


        [Test]
        public async Task FailATask_TaskNotExist_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult((CNTask)null));

            //Act
            var result = await targetService.FailATask(mockTask.TaskId,null);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }


        [Test]
        public async Task FailATask_TaskAlreadyFail_UpdateReason()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsFail = true;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.FailATask(mockTask.TaskId, &quot;reason&quot;);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x=&gt;x.FailReason.Equals(&quot;reason&quot;) &amp;&amp; x.TaskId == mockTask.TaskId));
        }
        [Test]
        public async Task FailATask_TaskNotAlreadyFail_UpdateBothFields()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.IsFail = false;
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.FailATask(mockTask.TaskId, &quot;reason&quot;);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; x.FailReason.Equals(&quot;reason&quot;) &amp;&amp; x.IsFail &amp;&amp; x.TaskId == mockTask.TaskId));
        }


        [Test]
        public async Task SetParentTask_TaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockParentTask = DomainTestHelper.GetARandomTask(2);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.SetParentTask(null, mockParentTask);

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
        [Test]
        public async Task SetParentTask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockParentTask = DomainTestHelper.GetARandomTask(2);
            //Assess
            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.SetParentTask(mockTask, mockParentTask);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt; x.ParentTask!=null &amp;&amp; x.ParentTask.TaskId == mockParentTask.TaskId &amp;&amp; x.TaskId == mockTask.TaskId));
        }


        [Test]
        public async Task AddPreTask_TargetTaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DONE;
            //Assess
//            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.AddPreTask(null, null);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }


        [Test]
        public async Task AddPreTask_PreTaskExists_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockPreTask = DomainTestHelper.GetARandomTask(2);
            mockTask.PreTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockPreTask,
                PreTaskId = mockPreTask.TaskId,
                SufTask = mockTask,
                SufTaskId = mockTask.TaskId
            });
            //Assess
            //            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.AddPreTask(mockTask, mockPreTask);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }


        [Test]
        public async Task AddPreTask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.TODO;
            var mockPreTask = DomainTestHelper.GetARandomTask(2);
            mockPreTask.Status = CNTaskStatus.TODO;
            mockPreTask.Status = CNTaskStatus.TODO;
            //Assess
            //            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            await targetService.AddPreTask(mockTask, mockPreTask);

            //Assert
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x=&gt;
                x.TaskId == mockTask.TaskId
                &amp;&amp; x.PreTaskConnectors!=null
                &amp;&amp; x.PreTaskConnectors.Count&gt;0
                &amp;&amp; x.PreTaskConnectors.Any(y=&gt;y.PreTask.TaskId == mockPreTask.TaskId)));
        }


        [Test]
        public async Task DelPreTask_TargetTaskIsNull_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.DONE;
            //Assess
            //            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.DelPreTask(null, null);

            //Assert
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }


        [Test]
        public async Task DelPreTask_Success()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.PENDING;
            mockTask.PendingReason = CNConstants.PENDINGREASON_PreTaskNotComplete;
            var mockPreTask = DomainTestHelper.GetARandomTask(2);
            var mockPreTaskDone = DomainTestHelper.GetARandomTask(3);
            mockPreTaskDone.Status = CNTaskStatus.DONE;
            mockPreTask.Status = CNTaskStatus.TODO;
            mockTask.PreTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockPreTask,
                PreTaskId = mockPreTask.TaskId,
                SufTask = mockTask,
                SufTaskId = mockTask.TaskId
            });
            mockTask.PreTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockPreTaskDone,
                PreTaskId = mockPreTaskDone.TaskId,
                SufTask = mockTask,
                SufTaskId = mockTask.TaskId
            });
            //Assess
            mockTaskDataStore.RemoveTaskConnector(Arg.Is&lt;CNTaskConnector&gt;(x =&gt;
                x.PreTaskId == mockPreTask.TaskId &amp;&amp; x.SufTaskId == mockTask.TaskId)).Returns(Task.FromResult(true));

            //Act
            await targetService.DelPreTask(mockTask, mockPreTask);

            //Assert
            await mockTaskDataStore.Received().RemoveTaskConnector(Arg.Is&lt;CNTaskConnector&gt;(x =&gt;
                x.PreTaskId == mockPreTask.TaskId &amp;&amp; x.SufTaskId == mockTask.TaskId));
            await mockTaskDataStore.Received().UpdateTask(Arg.Is&lt;CNTask&gt;(x =&gt;
                x.TaskId == mockTask.TaskId
                &amp;&amp; x.PreTaskConnectors != null
                &amp;&amp; x.PreTaskConnectors.Count &gt; 0
                &amp;&amp; x.PreTaskConnectors.Any(y =&gt; y.PreTask.TaskId == mockPreTask.TaskId)));
        }


        [Test]
        public async Task DelPreTask_PreTaskNotExist_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            var mockPreTask = DomainTestHelper.GetARandomTask(2);
            mockPreTask.Status = CNTaskStatus.TODO;
            //Assess
            //            mockTaskDataStore.GetTask(mockTask.TaskId).Returns(Task.FromResult(mockTask));

            //Act
            var result = await targetService.DelPreTask(mockTask, mockPreTask);

            //Assert

            Assert.IsFalse(result);
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }


        [Test]
        public async Task DelPreTask_DBFail_ReturnFalse()
        {
            var mockTaskDataStore = _kernel.Get&lt;ITaskDataStore&gt;();
            var targetService = _kernel.Get&lt;ITaskService&gt;();
            var mockTask = DomainTestHelper.GetARandomTask(1);
            mockTask.Status = CNTaskStatus.PENDING;
            mockTask.PendingReason = CNConstants.PENDINGREASON_PreTaskNotComplete;
            var mockPreTask = DomainTestHelper.GetARandomTask(2);
            mockPreTask.Status = CNTaskStatus.TODO;
            mockTask.PreTaskConnectors.Add(new CNTaskConnector()
            {
                PreTask = mockPreTask,
                PreTaskId = mockPreTask.TaskId,
                SufTask = mockTask,
                SufTaskId = mockTask.TaskId
            });
            //Assess
            mockTaskDataStore.RemoveTaskConnector(Arg.Is&lt;CNTaskConnector&gt;(x =&gt;
                x.PreTaskId == mockPreTask.TaskId &amp;&amp; x.SufTaskId == mockTask.TaskId)).Returns(Task.FromResult(false));

            //Act
            var result = await targetService.DelPreTask(mockTask, mockPreTask);

            //Assert
            Assert.IsFalse(result);
            await mockTaskDataStore.Received().RemoveTaskConnector(Arg.Is&lt;CNTaskConnector&gt;(x =&gt;
                x.PreTaskId == mockPreTask.TaskId &amp;&amp; x.SufTaskId == mockTask.TaskId));
            await mockTaskDataStore.DidNotReceiveWithAnyArgs().UpdateTask(mockTask);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[19,9,19,10,1],[20,13,20,67,1],[21,13,21,77,1],[22,13,22,61,1],[23,13,23,36,1],[26,13,26,64,1],[27,13,28,50,1],[29,13,34,28,1],[35,13,35,93,1],[38,13,38,81,1],[41,13,43,80,1],[44,13,46,85,1],[47,9,47,10,1],[51,9,51,10,1],[52,13,52,67,1],[53,13,53,77,1],[54,13,54,61,1],[55,13,55,36,1],[58,13,58,64,1],[59,13,59,104,1],[60,13,65,28,1],[66,13,66,93,1],[69,13,69,81,1],[72,13,74,80,1],[75,13,77,85,1],[78,9,78,10,1],[82,9,82,10,1],[83,13,83,67,1],[84,13,84,77,1],[85,13,85,61,1],[88,13,88,82,1],[91,13,91,103,1],[94,13,94,35,1],[95,13,95,95,1],[96,9,96,10,1],[100,9,100,10,1],[101,13,101,67,1],[102,13,102,77,1],[103,13,103,61,1],[104,13,104,36,1],[107,13,107,64,1],[108,13,113,28,1],[114,13,114,93,1],[117,13,118,17,1],[118,17,118,102,1],[118,102,118,104,1],[117,13,118,104,1],[121,13,121,95,1],[122,9,122,10,1],[126,9,126,10,1],[127,13,127,67,1],[128,13,128,77,1],[129,13,129,61,1],[132,13,132,64,1],[134,13,134,96,1],[137,13,137,82,1],[140,13,140,38,1],[141,13,141,45,1],[142,13,142,93,1],[143,9,143,10,1],[146,9,146,10,1],[147,13,147,67,1],[148,13,148,77,1],[149,13,149,61,1],[152,13,152,64,1],[154,13,154,93,1],[157,13,157,69,1],[160,13,160,92,1],[161,9,161,10,1],[164,9,164,10,1],[165,13,165,67,1],[166,13,166,77,1],[167,13,167,61,1],[168,13,168,36,1],[171,13,171,64,1],[173,13,173,96,1],[176,13,176,77,1],[179,13,180,40,1],[181,13,181,94,1],[182,9,182,10,1],[185,9,185,10,1],[186,13,186,67,1],[187,13,187,77,1],[188,13,188,61,1],[189,13,189,36,1],[192,13,192,64,1],[193,13,193,69,1],[194,13,194,67,1],[195,13,195,54,1],[196,13,202,16,1],[203,13,203,51,1],[204,13,204,48,1],[206,13,206,93,1],[209,13,209,77,1],[212,13,213,90,1],[214,13,214,93,1],[215,9,215,10,1],[218,9,218,10,1],[219,13,219,67,1],[220,13,220,77,1],[221,13,221,61,1],[222,13,222,36,1],[225,13,225,64,1],[226,13,226,51,1],[228,13,228,49,1],[229,13,234,19,1],[235,13,239,28,1],[240,13,240,93,1],[241,13,242,59,1],[244,13,244,66,1],[247,13,248,95,1],[249,13,250,95,1],[251,13,251,85,1],[252,9,252,10,1],[256,9,256,10,1],[257,13,257,67,1],[258,13,258,77,1],[259,13,259,61,1],[260,13,260,36,1],[263,13,263,64,1],[264,13,264,51,1],[266,13,266,69,1],[267,13,272,19,1],[273,13,278,28,1],[279,13,279,93,1],[280,13,281,59,1],[283,13,283,66,1],[287,13,287,101,1],[288,13,289,104,1],[290,13,290,85,1],[291,9,291,10,1],[295,9,295,10,1],[296,13,296,67,1],[297,13,297,77,1],[298,13,298,61,1],[299,13,299,36,1],[302,13,302,64,1],[303,13,303,51,1],[305,13,305,69,1],[306,13,311,19,1],[312,13,317,28,1],[318,13,318,93,1],[319,13,320,63,1],[322,13,322,79,1],[325,13,325,36,1],[326,13,326,101,1],[327,13,327,99,1],[328,13,328,101,1],[329,9,329,10,1],[333,9,333,10,1],[334,13,334,67,1],[335,13,335,77,1],[336,13,336,61,1],[337,13,337,36,1],[340,13,340,64,1],[341,13,341,51,1],[343,13,343,69,1],[344,13,349,19,1],[350,13,355,28,1],[356,13,356,93,1],[357,13,358,59,1],[360,13,360,66,1],[364,13,364,99,1],[365,13,366,106,1],[367,13,367,85,1],[368,9,368,10,1],[372,9,372,10,1],[373,13,373,67,1],[374,13,374,77,1],[375,13,375,61,1],[376,13,376,36,1],[379,13,379,64,1],[380,13,380,69,1],[381,13,381,67,1],[382,13,382,54,1],[383,13,389,16,1],[390,13,390,51,1],[392,13,392,69,1],[393,13,394,113,1],[395,13,400,28,1],[401,13,401,93,1],[402,13,403,59,1],[405,13,405,81,1],[408,13,409,104,1],[410,13,410,58,1],[411,13,411,85,1],[412,9,412,10,1],[416,9,416,10,1],[417,13,417,67,1],[418,13,418,77,1],[419,13,419,61,1],[420,13,420,36,1],[423,13,423,64,1],[424,13,424,69,1],[425,13,425,67,1],[426,13,426,54,1],[427,13,433,16,1],[434,13,434,51,1],[436,13,436,69,1],[437,13,438,115,1],[439,13,444,28,1],[445,13,445,93,1],[446,13,447,59,1],[449,13,449,81,1],[452,13,453,64,1],[454,13,454,58,1],[455,13,455,101,1],[456,9,456,10,1],[460,9,460,10,1],[461,13,461,67,1],[462,13,462,77,1],[463,13,463,61,1],[464,13,464,36,1],[467,13,467,64,1],[468,13,468,69,1],[469,13,469,67,1],[470,13,470,54,1],[471,13,477,16,1],[478,13,478,51,1],[480,13,480,69,1],[481,13,482,131,1],[483,13,488,28,1],[489,13,489,93,1],[490,13,491,59,1],[493,13,493,81,1],[496,13,497,64,1],[498,13,498,58,1],[499,13,499,101,1],[500,9,500,10,1],[503,9,503,10,1],[504,13,504,67,1],[505,13,505,77,1],[506,13,506,61,1],[507,13,507,36,1],[510,13,510,64,1],[511,13,511,51,1],[513,13,513,69,1],[514,13,515,115,1],[516,13,521,28,1],[522,13,522,93,1],[523,13,524,59,1],[526,13,526,81,1],[529,13,530,104,1],[531,13,531,58,1],[532,13,532,85,1],[533,9,533,10,1],[537,9,537,10,1],[538,13,538,67,1],[539,13,539,61,1],[545,13,545,62,1],[548,13,548,36,1],[549,13,549,81,1],[550,9,550,10,1],[553,9,553,10,1],[554,13,554,67,1],[555,13,555,61,1],[556,13,556,63,1],[559,13,559,83,1],[562,13,562,66,1],[565,13,565,35,1],[566,13,566,114,1],[567,9,567,10,1],[570,9,570,10,1],[571,13,571,67,1],[572,13,572,61,1],[576,13,576,47,1],[579,13,579,61,1],[580,9,580,10,1],[583,9,583,10,1],[584,13,584,67,1],[585,13,585,61,1],[589,13,589,48,1],[592,13,592,59,1],[593,9,593,10,1],[596,9,596,10,1],[597,13,597,67,1],[598,13,598,61,1],[599,13,599,62,1],[602,13,602,55,1],[605,13,605,111,1],[606,9,606,10,1],[611,9,611,10,1],[612,13,612,67,1],[613,13,613,61,1],[614,13,614,63,1],[616,13,616,95,1],[619,13,619,74,1],[622,13,622,36,1],[623,13,623,85,1],[624,9,624,10,1],[627,9,627,10,1],[628,13,628,67,1],[629,13,629,61,1],[630,13,630,63,1],[631,13,631,39,1],[633,13,633,91,1],[636,13,636,74,1],[639,13,639,35,1],[640,13,640,85,1],[641,9,641,10,1],[644,9,644,10,1],[645,13,645,67,1],[646,13,646,61,1],[647,13,647,63,1],[648,13,648,68,1],[649,13,649,52,1],[650,13,650,40,1],[652,13,652,91,1],[655,13,655,71,1],[655,71,655,118,1],[655,118,655,120,1],[655,13,655,120,1],[658,13,658,85,1],[659,9,659,10,1],[662,9,662,10,1],[663,13,663,67,1],[664,13,664,61,1],[665,13,665,63,1],[666,13,666,66,1],[667,13,671,16,1],[672,13,672,40,1],[674,13,674,91,1],[677,13,677,70,1],[677,70,677,117,1],[677,117,677,119,1],[677,13,677,119,1],[680,13,680,85,1],[681,9,681,10,1],[685,9,685,10,1],[686,13,686,67,1],[687,13,687,61,1],[688,13,688,63,1],[689,13,689,68,1],[690,13,690,52,1],[691,13,691,66,1],[692,13,696,16,1],[697,13,697,40,1],[699,13,699,91,1],[702,13,702,66,1],[705,13,705,126,1],[706,9,706,10,1],[712,9,712,10,1],[713,13,713,67,1],[714,13,714,61,1],[715,13,715,63,1],[717,13,717,95,1],[720,13,720,76,1],[723,13,723,36,1],[724,13,724,85,1],[725,9,725,10,1],[728,9,728,10,1],[729,13,729,67,1],[730,13,730,61,1],[731,13,731,63,1],[732,13,732,40,1],[734,13,734,91,1],[737,13,737,76,1],[740,13,740,35,1],[741,13,741,85,1],[742,9,742,10,1],[745,9,745,10,1],[746,13,746,67,1],[747,13,747,61,1],[748,13,748,63,1],[749,13,749,68,1],[750,13,750,52,1],[751,13,751,66,1],[752,13,756,16,1],[757,13,757,39,1],[759,13,759,91,1],[762,13,762,63,1],[765,13,765,127,1],[766,9,766,10,1],[772,9,772,10,1],[773,13,773,67,1],[774,13,774,61,1],[775,13,775,63,1],[777,13,777,95,1],[780,13,780,75,1],[783,13,783,36,1],[784,13,784,85,1],[785,9,785,10,1],[788,9,788,10,1],[789,13,789,67,1],[790,13,790,61,1],[791,13,791,63,1],[792,13,792,40,1],[794,13,794,91,1],[797,13,797,75,1],[800,13,800,36,1],[801,13,801,85,1],[802,9,802,10,1],[805,9,805,10,1],[806,13,806,67,1],[807,13,807,61,1],[808,13,808,63,1],[809,13,809,68,1],[810,13,810,52,1],[811,13,811,39,1],[813,13,813,91,1],[816,13,816,72,1],[816,72,816,120,1],[816,120,816,122,1],[816,13,816,122,1],[819,13,819,85,1],[820,9,820,10,1],[823,9,823,10,1],[824,13,824,67,1],[825,13,825,61,1],[826,13,826,63,1],[827,13,827,66,1],[828,13,828,39,1],[829,13,833,16,1],[835,13,835,91,1],[838,13,838,70,1],[838,70,838,118,1],[838,118,838,120,1],[838,13,838,120,1],[841,13,841,85,1],[842,9,842,10,1],[846,9,846,10,1],[847,13,847,67,1],[848,13,848,61,1],[849,13,849,63,1],[850,13,850,68,1],[851,13,851,52,1],[852,13,852,39,1],[853,13,853,66,1],[854,13,858,16,1],[860,13,860,91,1],[863,13,863,68,1],[866,13,866,109,1],[867,9,867,10,1],[871,9,871,10,1],[872,13,872,67,1],[873,13,873,61,1],[874,13,874,63,1],[876,13,876,95,1],[879,13,879,74,1],[882,13,882,36,1],[883,13,883,85,1],[884,9,884,10,1],[888,9,888,10,1],[889,13,889,67,1],[890,13,890,61,1],[891,13,891,63,1],[892,13,892,39,1],[894,13,894,91,1],[897,13,897,74,1],[900,13,900,36,1],[901,13,901,85,1],[902,9,902,10,1],[905,9,905,10,1],[906,13,906,67,1],[907,13,907,61,1],[908,13,908,63,1],[909,13,909,49,1],[911,13,911,91,1],[914,13,914,65,1],[914,65,914,112,1],[914,112,914,114,1],[914,13,914,114,1],[917,13,917,85,1],[918,9,918,10,1],[921,9,921,10,1],[922,13,922,67,1],[923,13,923,61,1],[924,13,924,63,1],[925,13,925,49,1],[927,13,927,91,1],[930,13,930,74,1],[933,13,933,35,1],[934,13,934,143,1],[935,9,935,10,1],[941,9,941,10,1],[942,13,942,67,1],[943,13,943,61,1],[944,13,944,63,1],[946,13,946,95,1],[949,13,949,74,1],[952,13,952,36,1],[953,13,953,85,1],[954,9,954,10,1],[958,9,958,10,1],[959,13,959,67,1],[960,13,960,61,1],[961,13,961,63,1],[962,13,962,39,1],[964,13,964,91,1],[967,13,967,74,1],[970,13,970,36,1],[971,13,971,85,1],[972,9,972,10,1],[975,9,975,10,1],[976,13,976,67,1],[977,13,977,61,1],[978,13,978,63,1],[979,13,979,52,1],[981,13,981,91,1],[984,13,984,65,1],[984,65,984,112,1],[984,112,984,114,1],[984,13,984,114,1],[987,13,987,85,1],[988,9,988,10,1],[991,9,991,10,1],[992,13,992,67,1],[993,13,993,61,1],[994,13,994,63,1],[995,13,995,50,1],[997,13,997,91,1],[1000,13,1000,61,1],[1003,13,1003,142,1],[1004,9,1004,10,1],[1009,9,1009,10,1],[1010,13,1010,67,1],[1011,13,1011,61,1],[1012,13,1012,63,1],[1014,13,1014,95,1],[1017,13,1017,81,1],[1020,13,1020,36,1],[1021,13,1021,85,1],[1022,9,1022,10,1],[1026,9,1026,10,1],[1027,13,1027,67,1],[1028,13,1028,61,1],[1029,13,1029,63,1],[1030,13,1030,39,1],[1032,13,1032,91,1],[1035,13,1035,82,1],[1038,13,1038,36,1],[1039,13,1039,85,1],[1040,9,1040,10,1],[1043,9,1043,10,1],[1044,13,1044,67,1],[1045,13,1045,61,1],[1046,13,1046,63,1],[1047,13,1047,49,1],[1049,13,1049,91,1],[1052,13,1052,65,1],[1052,65,1052,120,1],[1052,120,1052,122,1],[1052,13,1052,122,1],[1055,13,1055,85,1],[1056,9,1056,10,1],[1059,9,1059,10,1],[1060,13,1060,67,1],[1061,13,1061,61,1],[1062,13,1062,63,1],[1063,13,1063,50,1],[1065,13,1065,91,1],[1068,13,1068,81,1],[1071,13,1074,50,1],[1075,9,1075,10,1],[1080,9,1080,10,1],[1081,13,1081,67,1],[1082,13,1082,61,1],[1083,13,1083,63,1],[1085,13,1085,95,1],[1088,13,1088,75,1],[1091,13,1091,36,1],[1092,13,1092,85,1],[1093,9,1093,10,1],[1097,9,1097,10,1],[1098,13,1098,67,1],[1099,13,1099,61,1],[1100,13,1100,63,1],[1101,13,1101,39,1],[1103,13,1103,91,1],[1106,13,1106,75,1],[1109,13,1109,36,1],[1110,13,1110,85,1],[1111,9,1111,10,1],[1114,9,1114,10,1],[1115,13,1115,67,1],[1116,13,1116,61,1],[1117,13,1117,63,1],[1118,13,1118,49,1],[1120,13,1120,91,1],[1123,13,1123,65,1],[1123,65,1123,113,1],[1123,113,1123,115,1],[1123,13,1123,115,1],[1126,13,1126,85,1],[1127,9,1127,10,1],[1130,9,1130,10,1],[1131,13,1131,67,1],[1132,13,1132,61,1],[1133,13,1133,63,1],[1134,13,1134,50,1],[1136,13,1136,91,1],[1139,13,1139,62,1],[1142,13,1142,142,1],[1143,9,1143,10,1],[1148,9,1148,10,1],[1149,13,1149,67,1],[1150,13,1150,61,1],[1151,13,1151,63,1],[1153,13,1153,95,1],[1156,13,1156,78,1],[1159,13,1159,36,1],[1160,13,1160,85,1],[1161,9,1161,10,1],[1166,9,1166,10,1],[1167,13,1167,67,1],[1168,13,1168,61,1],[1169,13,1169,63,1],[1170,13,1170,36,1],[1172,13,1172,91,1],[1175,13,1175,70,1],[1178,13,1178,140,1],[1179,9,1179,10,1],[1182,9,1182,10,1],[1183,13,1183,67,1],[1184,13,1184,61,1],[1185,13,1185,63,1],[1186,13,1186,37,1],[1188,13,1188,91,1],[1191,13,1191,70,1],[1194,13,1194,154,1],[1195,9,1195,10,1],[1200,9,1200,10,1],[1201,13,1201,67,1],[1202,13,1202,61,1],[1203,13,1203,63,1],[1204,13,1204,69,1],[1206,13,1206,91,1],[1209,13,1209,69,1],[1212,13,1212,85,1],[1213,9,1213,10,1],[1216,9,1216,10,1],[1217,13,1217,67,1],[1218,13,1218,61,1],[1219,13,1219,63,1],[1220,13,1220,69,1],[1222,13,1222,91,1],[1225,13,1225,73,1],[1228,13,1228,179,1],[1229,9,1229,10,1],[1234,9,1234,10,1],[1235,13,1235,67,1],[1236,13,1236,61,1],[1237,13,1237,63,1],[1238,13,1238,49,1],[1243,13,1243,69,1],[1246,13,1246,36,1],[1247,13,1247,85,1],[1248,9,1248,10,1],[1253,9,1253,10,1],[1254,13,1254,67,1],[1255,13,1255,61,1],[1256,13,1256,63,1],[1257,13,1257,66,1],[1258,13,1264,16,1],[1269,13,1269,80,1],[1272,13,1272,36,1],[1273,13,1273,85,1],[1274,9,1274,10,1],[1279,9,1279,10,1],[1280,13,1280,67,1],[1281,13,1281,61,1],[1282,13,1282,63,1],[1283,13,1283,49,1],[1284,13,1284,66,1],[1285,13,1285,52,1],[1286,13,1286,52,1],[1291,13,1291,67,1],[1294,13,1298,89,1],[1299,9,1299,10,1],[1304,9,1304,10,1],[1305,13,1305,67,1],[1306,13,1306,61,1],[1307,13,1307,63,1],[1308,13,1308,49,1],[1313,13,1313,69,1],[1316,13,1316,85,1],[1317,9,1317,10,1],[1322,9,1322,10,1],[1323,13,1323,67,1],[1324,13,1324,61,1],[1325,13,1325,63,1],[1326,13,1326,52,1],[1327,13,1327,83,1],[1328,13,1328,66,1],[1329,13,1329,70,1],[1330,13,1330,56,1],[1331,13,1331,52,1],[1332,13,1338,16,1],[1339,13,1345,16,1],[1347,13,1348,118,1],[1351,13,1351,67,1],[1354,13,1355,87,1],[1356,13,1360,91,1],[1361,9,1361,10,1],[1366,9,1366,10,1],[1367,13,1367,67,1],[1368,13,1368,61,1],[1369,13,1369,63,1],[1370,13,1370,66,1],[1371,13,1371,52,1],[1376,13,1376,80,1],[1380,13,1380,36,1],[1381,13,1381,85,1],[1382,9,1382,10,1],[1387,9,1387,10,1],[1388,13,1388,67,1],[1389,13,1389,61,1],[1390,13,1390,63,1],[1391,13,1391,52,1],[1392,13,1392,83,1],[1393,13,1393,66,1],[1394,13,1394,52,1],[1395,13,1401,16,1],[1403,13,1404,119,1],[1407,13,1407,80,1],[1410,13,1410,36,1],[1411,13,1412,87,1],[1413,13,1413,85,1],[1414,9,1414,10,1]]);
    </script>
  </body>
</html>