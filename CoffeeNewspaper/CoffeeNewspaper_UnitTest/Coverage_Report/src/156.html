<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>e:\githubproject\coffeenewspaper\coffeenewspaper\coffeenewspaper_unittest\domaintest\timeslicetest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using CN_Core;
using NUnit.Framework;

namespace CoffeeNewspaper_UnitTest.DomainTest
{
    [TestFixture]
    public class TimeSliceTest
    {
        [Test]
        public void CreateATimeSlice()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now, DateTime.Now.AddMinutes(1));
            CNTimeSlice b = new CNTimeSlice(DateTime.Now);
            Assert.IsNotNull(a);
            Assert.IsNotNull(b);
        }
        [Test]
        public void CreateATimeSlice_EndTimeGreaterThanStartTime()
        {
            Assert.Throws&lt;ArgumentException&gt;(() =&gt; {
                CNTimeSlice a = new CNTimeSlice(DateTime.Now, DateTime.Now.AddMinutes(-1));});
        }
        [Test]
        public void CloneATimeSlice()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now,DateTime.Now.AddMinutes(1));
            CNTimeSlice b = a.Clone() as CNTimeSlice;

            Assert.IsFalse(ReferenceEquals(a, b));

            Assert.AreEqual(a,b);
        }

        [Test]
        public void InterceptWithAnother_BothNoEndTime()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(-1));
            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }

        [Test]
        public void InterceptWithAnother_OneNoEndTime_TimeLineIntercept1()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(-1),DateTime.Now.AddMinutes(1));

            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }

        [Test]
        public void InterceptWithAnother_OneNoEndTime_TimeLineIntercept2()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(1), DateTime.Now.AddMinutes(2));

            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }
        [Test]
        public void InterceptWithAnother_OneNoEndTime_TimeLineNotIntercept()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(-2), DateTime.Now.AddMinutes(-1));

            Assert.IsFalse(a.InterceptWith(b));
            Assert.IsFalse(b.InterceptWith(a));
        }


        [Test]
        public void InterceptWithAnother_nullCondition_false()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now.AddMinutes(-3), DateTime.Now);
            Assert.IsFalse(a.InterceptWith(null));
        }
        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineIntercept1()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now.AddMinutes(-3),DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(-2), DateTime.Now.AddMinutes(-1));

            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }
        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineIntercept2()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now.AddMinutes(-3), DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(-4), DateTime.Now.AddMinutes(-2));

            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }
        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineIntercept3()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now.AddMinutes(-3), DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(-2), DateTime.Now.AddMinutes(1));

            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }

        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineIntercept5()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-2).AddMinutes(-3), currentTime.AddDays(-1).AddMinutes(-2));
            CNTimeSlice b = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-3), currentTime.AddDays(-1).AddMinutes(-1));

            Assert.IsTrue(a.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(a));
        }

        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineNotIntercept1()
        {
            CNTimeSlice a = new CNTimeSlice(DateTime.Now.AddMinutes(-3), DateTime.Now);
            CNTimeSlice b = new CNTimeSlice(DateTime.Now.AddMinutes(1), DateTime.Now.AddMinutes(3));

            Assert.IsFalse(a.InterceptWith(b));
            Assert.IsFalse(b.InterceptWith(a));
        }

        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineNotIntercept2()
        {
            var currentTime = DateTime.Now;
               CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            CNTimeSlice b = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-2), currentTime.AddDays(-1).AddMinutes(-1));

            Assert.IsFalse(a.InterceptWith(b));
            Assert.IsFalse(b.InterceptWith(a));
        }

        [Test]
        public void InterceptWithAnother_BothEndTime_TimeLineNotIntercept3()
        {
            var now = DateTime.Now;
            var a = new CNTimeSlice(now.AddHours(1), now.AddHours(2));
            var b = new CNTimeSlice(now.AddHours(3));
            var c = new CNTimeSlice(now.AddHours(2), now.AddHours(3));

            Assert.IsFalse(a.InterceptWith(b));
            Assert.IsFalse(b.InterceptWith(a));
            Assert.IsFalse(a.InterceptWith(c));
            Assert.IsFalse(c.InterceptWith(a));
            Assert.IsTrue(c.InterceptWith(b));
            Assert.IsTrue(b.InterceptWith(c));
        }

        [Test]
        public void GetDayDuration_SingleDay()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            CNTimeSlice b = new CNTimeSlice(Convert.ToDateTime(currentTime.AddDays(-1).ToShortDateString()), Convert.ToDateTime(currentTime.ToShortDateString()).AddMilliseconds(-1));
            Assert.AreEqual(b,a.GetDayDuration());
        }
        [Test]
        public void GetDayDuration_MutipleDay()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddMinutes(2));
            CNTimeSlice b = new CNTimeSlice(Convert.ToDateTime(currentTime.AddDays(-1).ToShortDateString()), Convert.ToDateTime(currentTime.AddDays(1).ToShortDateString()).AddMilliseconds(-1));
            Assert.AreEqual(b, a.GetDayDuration());
        }
        [Test]
        public void GetDayDuration_StartTimeBiggerThanDateTimeNow()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(1).AddMinutes(-1), currentTime.AddDays(1).AddMinutes(4));
            Assert.IsNull(a.GetDayDuration());
        }

        [Test]
        public void IsContaining_NoBoundary()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1));
            CNTimeSlice b = new CNTimeSlice(Convert.ToDateTime(currentTime.AddDays(-1).ToShortDateString()), Convert.ToDateTime(currentTime.ToShortDateString()));
            Assert.IsFalse(b.IsContaining(a));
        }
        [Test]
        public void IsContaining_BWrapA()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            CNTimeSlice b = new CNTimeSlice(Convert.ToDateTime(currentTime.AddDays(-1).ToShortDateString()), Convert.ToDateTime(currentTime.ToShortDateString()));
            Assert.IsTrue(b.IsContaining(a));
        }
        [Test]
        public void IsContaining_CEqualD()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice c = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            CNTimeSlice d = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            Assert.IsTrue(c.IsContaining(d));
            Assert.IsTrue(d.IsContaining(c));
        }
        [Test]
        public void IsContaining_EColideF()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice e = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-2), currentTime.AddDays(-1).AddMinutes(1));
            CNTimeSlice f = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            Assert.IsFalse(e.IsContaining(f));
            Assert.IsFalse(f.IsContaining(e));
        }
        [Test]
        public void IsContaining_GWithinHWithBoundaries()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice g = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-2), currentTime.AddDays(-1).AddMinutes(1));
            CNTimeSlice h = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-2), currentTime.AddDays(-1).AddMinutes(2));
            Assert.IsFalse(g.IsContaining(h));
            Assert.IsTrue(h.IsContaining(g));
            g = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            h = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-2), currentTime.AddDays(-1).AddMinutes(2));
            Assert.IsFalse(g.IsContaining(h));
            Assert.IsTrue(h.IsContaining(g));
        }

        [Test]
        public void GetWorkDays()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            CNTimeSlice b = a.GetDayDuration();
            Assert.AreEqual(1,b.GetWorkDays());
            a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(1).AddMinutes(2));
            b = a.GetDayDuration();
            Assert.AreEqual(3, b.GetWorkDays());
            a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), DateTime.Now.Date);
            b = a.GetDayDuration();
            Assert.AreEqual(2, b.GetWorkDays());
        }
        [Test]
        public void GetWorkDays_EndTimeZero()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1));
            ;
            Assert.AreEqual(0, a.GetWorkDays());
        }

        [Test]
        public void SortTest()
        {
            var currentTime = DateTime.Now;
            CNTimeSlice a = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-1), currentTime.AddDays(-1).AddMinutes(2));
            CNTimeSlice b = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-2), currentTime.AddDays(-1).AddMinutes(2)); 
            CNTimeSlice c = new CNTimeSlice(currentTime.AddDays(-1).AddMinutes(-4), currentTime.AddDays(-1).AddMinutes(2));

            var result = new List&lt;CNTimeSlice&gt;() {a, b, c};
            result.Sort();
            Assert.AreEqual(c, result.First());
            Assert.AreEqual(a, result.Last());
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,10,1],[15,13,15,87,1],[16,13,16,59,1],[17,13,17,33,1],[18,13,18,33,1],[19,9,19,10,1],[22,9,22,10,1],[23,13,24,95,1],[25,9,25,10,1],[28,9,28,10,1],[29,13,29,86,1],[30,13,30,54,1],[32,13,32,51,1],[34,13,34,34,1],[35,9,35,10,1],[39,9,39,10,1],[40,13,40,59,1],[41,13,41,74,1],[42,13,42,47,1],[43,13,43,47,1],[44,9,44,10,1],[48,9,48,10,1],[49,13,49,59,1],[50,13,50,101,1],[52,13,52,47,1],[53,13,53,47,1],[54,9,54,10,1],[58,9,58,10,1],[59,13,59,59,1],[60,13,60,101,1],[62,13,62,47,1],[63,13,63,47,1],[64,9,64,10,1],[67,9,67,10,1],[68,13,68,59,1],[69,13,69,103,1],[71,13,71,48,1],[72,13,72,48,1],[73,9,73,10,1],[78,9,78,10,1],[79,13,79,88,1],[80,13,80,51,1],[81,9,81,10,1],[84,9,84,10,1],[85,13,85,87,1],[86,13,86,103,1],[88,13,88,47,1],[89,13,89,47,1],[90,9,90,10,1],[93,9,93,10,1],[94,13,94,88,1],[95,13,95,103,1],[97,13,97,47,1],[98,13,98,47,1],[99,9,99,10,1],[102,9,102,10,1],[103,13,103,88,1],[104,13,104,102,1],[106,13,106,47,1],[107,13,107,47,1],[108,9,108,10,1],[112,9,112,10,1],[113,13,113,44,1],[114,13,114,125,1],[115,13,115,125,1],[117,13,117,47,1],[118,13,118,47,1],[119,9,119,10,1],[123,9,123,10,1],[124,13,124,88,1],[125,13,125,101,1],[127,13,127,48,1],[128,13,128,48,1],[129,9,129,10,1],[133,9,133,10,1],[134,13,134,44,1],[135,16,135,127,1],[136,13,136,125,1],[138,13,138,48,1],[139,13,139,48,1],[140,9,140,10,1],[144,9,144,10,1],[145,13,145,36,1],[146,13,146,71,1],[147,13,147,54,1],[148,13,148,71,1],[150,13,150,48,1],[151,13,151,48,1],[152,13,152,48,1],[153,13,153,48,1],[154,13,154,47,1],[155,13,155,47,1],[156,9,156,10,1],[160,9,160,10,1],[161,13,161,44,1],[162,13,162,124,1],[163,13,163,183,1],[164,13,164,51,1],[165,9,165,10,1],[168,9,168,10,1],[169,13,169,44,1],[170,13,170,112,1],[171,13,171,194,1],[172,13,172,52,1],[173,9,173,10,1],[176,9,176,10,1],[177,13,177,44,1],[178,13,178,122,1],[179,13,179,47,1],[180,9,180,10,1],[184,9,184,10,1],[185,13,185,44,1],[186,13,186,85,1],[187,13,187,163,1],[188,13,188,47,1],[189,9,189,10,1],[192,9,192,10,1],[193,13,193,44,1],[194,13,194,124,1],[195,13,195,163,1],[196,13,196,46,1],[197,9,197,10,1],[200,9,200,10,1],[201,13,201,44,1],[202,13,202,124,1],[203,13,203,124,1],[204,13,204,46,1],[205,13,205,46,1],[206,9,206,10,1],[209,9,209,10,1],[210,13,210,44,1],[211,13,211,124,1],[212,13,212,124,1],[213,13,213,47,1],[214,13,214,47,1],[215,9,215,10,1],[218,9,218,10,1],[219,13,219,44,1],[220,13,220,124,1],[221,13,221,124,1],[222,13,222,47,1],[223,13,223,46,1],[224,13,224,112,1],[225,13,225,112,1],[226,13,226,47,1],[227,13,227,46,1],[228,9,228,10,1],[232,9,232,10,1],[233,13,233,44,1],[234,13,234,124,1],[235,13,235,48,1],[236,13,236,48,1],[237,13,237,111,1],[238,13,238,36,1],[239,13,239,49,1],[240,13,240,92,1],[241,13,241,36,1],[242,13,242,49,1],[243,9,243,10,1],[246,9,246,10,1],[247,13,247,44,1],[248,13,248,85,1],[249,13,249,14,1],[250,13,250,49,1],[251,9,251,10,1],[255,9,255,10,1],[256,13,256,44,1],[257,13,257,124,1],[258,13,258,124,1],[259,13,259,124,1],[261,13,261,60,1],[262,13,262,27,1],[263,13,263,48,1],[264,13,264,47,1],[265,9,265,10,1]]);
    </script>
  </body>
</html>