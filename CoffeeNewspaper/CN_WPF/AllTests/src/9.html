<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>e:\githubproject\coffeenewspaper\coffeenewspaper\cn_cli\program.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Threading.Tasks;
using CN_Core;
using CN_Repository;
using CN_Service;

namespace CoffeeNewspaper_CLI
{
    class Program
    {
        /// &lt;summary&gt;
        ///     Application entry point
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;args&quot;&gt;Command line arguments&lt;/param&gt;
        private static void Main(string[] args)
        {
            //Ioc Setup
            IoC.Setup();
            IoC.Kernel.BindCNDBContext();
            IoC.Kernel.BindSqliteDataStore();
            IoC.Kernel.BindServices();

            // enable ctrl+c
            Console.CancelKeyPress += (o, e) =&gt;
            {
                Environment.Exit(1);
            };
            BaseState currentStatue = new StartState();
            currentStatue.Display(null);
            while (true)
            {
                currentStatue.InitialCommandList();
                currentStatue.DisplayCmdLine();
                string input = Console.ReadLine();
                if (&quot;exit&quot;.Equals(input))
                {
                    break;
                }
                ArgumentParser parser = new ArgumentParser(input);
                var statue = currentStatue;
                var task = Task.Run(async () =&gt; await statue.DoCommand(parser));
                task.Wait();
                var nextState =task.Result;
                if (nextState != currentStatue)
                {
                    nextState.Display(currentStatue);
                    currentStatue = nextState;
                }
            }
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[16,9,16,10,0],[18,13,18,25,0],[19,13,19,42,0],[20,13,20,46,0],[21,13,21,39,0],[24,13,25,13,0],[25,13,25,14,0],[25,14,26,17,0],[26,17,26,37,0],[26,37,27,13,0],[27,13,27,14,0],[27,14,27,15,0],[24,13,27,15,0],[28,13,28,56,0],[29,13,29,41,0],[30,13,30,25,0],[31,13,31,14,0],[32,17,32,52,0],[33,17,33,48,0],[34,17,34,51,0],[35,17,35,42,0],[36,17,36,18,0],[37,21,37,27,0],[39,17,39,67,0],[40,17,40,44,0],[41,17,41,49,0],[41,49,41,79,0],[41,79,41,81,0],[41,17,41,81,0],[42,17,42,29,0],[43,17,43,44,0],[44,17,44,48,0],[45,17,45,18,0],[46,21,46,54,0],[47,21,47,47,0],[48,17,48,18,0],[49,13,49,14,0],[50,9,50,10,0]]);
    </script>
  </body>
</html>